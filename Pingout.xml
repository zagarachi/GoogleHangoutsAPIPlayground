<?xml version="1.0" encoding="UTF-8" ?>
<Module>
    <!-- Licensed under the Apache License, Version 2.0 (the "License"); you may not
     * use this file except in compliance with the License. You may obtain a copy of
     * the License at
     *
     * http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
     * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
     * License for the specific language governing permissions and limitations under
     * the License
    -->
    <ModulePrefs title="Hangout Starter">
        <Require feature="rpc" />
        <Require feature="views" />
        <Require feature="locked-domain" />
    </ModulePrefs>
    <Content type="html"><![CDATA[
        <html>
        <script src="https://hangoutsapi.talkgadget.google.com/hangouts/api/hangout.js?v=1.2"></script>
        <script>
            //store who you are, incase you dont know :P
            var ball = new Image();
            var overlay = '';

			gapi.hangout.onApiReady.add(
				function(eventObj) {
					if (eventObj.isApiReady) {
						ball.src = 'https://raw.github.com/zagarachi/GoogleHangoutsAPIPlayground/master/arrow.png';
						animate();
					}
				}
			);
			
			/** Animation loop */
			function animate(){
				drawFrame();
				// request new frame
				requestAnimFrame(function () {
					animate();
				});
			}
			
			function drawFrame(){
				var context = canvas.getContext('2d');
				
				context.drawImage(ball,0,0);
				
			}
			
			/** Standard requestAnimFrame from paulirish.com, running 30 fps */
			window.requestAnimFrame = (function (callback) {
				return window.requestAnimationFrame ||
				window.webkitRequestAnimationFrame ||
				window.mozRequestAnimationFrame ||
				window.oRequestAnimationFrame ||
				window.msRequestAnimationFrame ||
				function(callback){
					window.setTimeout(callback, 1000 / 30);
				};
			})();
			
        </script>
        </body></html>
        ]]>
</Content>
</Module>

